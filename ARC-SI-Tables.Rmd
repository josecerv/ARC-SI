---
title: "Symbolic Incentives in High-Stakes Prosocial Behavior Supplementary Tables S1-S10"
date: "`r format(Sys.Date(), '%B %d, %Y')`"
output:
  pdf_document:
    toc: yes
    fig_caption: yes
---

```{r setup, include=FALSE}
# Load necessary libraries
library(tidyverse)
library(lmtest)
library(sandwich)
library(margins)
options(digits=4)

```

# Data Loading

```{r load-data}
# Load the dataset
df <- read_csv('final_dataset.csv')

# Define the two main analysis samples
baseline_sample <- df
study_sample <- df %>% filter(is_study_sample == TRUE)

# Show sample sizes
print(paste("Baseline sample size:", nrow(baseline_sample)))
print(paste("Study sample size:", nrow(study_sample)))
```

# Table S1: Study Sample Representativeness

```{r table-s1}
# Calculate means for each characteristic in the study sample
table_s1_results <- study_sample %>%
  summarise(
    female_prop = mean(is_female, na.rm = TRUE),
    white_prop = mean(race == "White", na.rm = TRUE),
    hispanic_prop = mean(race == "Hispanic", na.rm = TRUE),
    other_prop = mean(race == "Other", na.rm = TRUE),
    black_prop = mean(race == "Black", na.rm = TRUE),
    asian_prop = mean(race == "Asian", na.rm = TRUE),
    age_mean = mean(age, na.rm = TRUE),
    prior_plasma_prop = mean(prior_plasma_donation, na.rm = TRUE),
    ab_blood_prop = mean(is_ab_blood_type, na.rm = TRUE),
    annual_donations_mean = mean(avg_annual_donations, na.rm = TRUE),
    median_income_mean = mean(zip_median_income, na.rm = TRUE),
    midwest_prop = mean(us_region == "Midwest", na.rm = TRUE),
    northeast_prop = mean(us_region == "Northeast", na.rm = TRUE),
    south_prop = mean(us_region == "South", na.rm = TRUE),
    west_prop = mean(us_region == "West", na.rm = TRUE),
    urban_prop = mean(is_urban, na.rm = TRUE),
    covid_incidence_mean = mean(county_covid_per_100k, na.rm = TRUE)
  )

# Print results
print("Table S1 Results - Study Sample Characteristics:")
print(t(table_s1_results))
```

# Table S2: Balance Check

```{r table-s2}
# Panel A: Study Sample Balance Check

# For continuous variables (age, annual donations, income, covid incidence)
print("Panel A - Continuous Variables Balance:")

# Age
age_control <- study_sample %>% filter(treatment_group == "Control") %>% pull(age)
age_treatment <- study_sample %>% filter(treatment_group == "Symbolic Incentives") %>% pull(age)
age_test <- t.test(age_control, age_treatment)
print(paste("Age - Control mean:", round(mean(age_control, na.rm=TRUE), 2), 
            "Treatment mean:", round(mean(age_treatment, na.rm=TRUE), 2),
            "Difference:", round(mean(age_treatment, na.rm=TRUE) - mean(age_control, na.rm=TRUE), 2),
            "p-value:", round(age_test$p.value, 3)))

# Annual donations
donations_control <- study_sample %>% filter(treatment_group == "Control") %>% pull(avg_annual_donations)
donations_treatment <- study_sample %>% filter(treatment_group == "Symbolic Incentives") %>% pull(avg_annual_donations)
donations_test <- t.test(donations_control, donations_treatment)
print(paste("Annual Donations - Control mean:", round(mean(donations_control, na.rm=TRUE), 2), 
            "Treatment mean:", round(mean(donations_treatment, na.rm=TRUE), 2),
            "Difference:", round(mean(donations_treatment, na.rm=TRUE) - mean(donations_control, na.rm=TRUE), 2),
            "p-value:", round(donations_test$p.value, 3)))

# Median income
income_control <- study_sample %>% filter(treatment_group == "Control") %>% pull(zip_median_income)
income_treatment <- study_sample %>% filter(treatment_group == "Symbolic Incentives") %>% pull(zip_median_income)
income_test <- t.test(income_control, income_treatment)
print(paste("Median Income - Control mean:", round(mean(income_control, na.rm=TRUE), 2), 
            "Treatment mean:", round(mean(income_treatment, na.rm=TRUE), 2),
            "Difference:", round(mean(income_treatment, na.rm=TRUE) - mean(income_control, na.rm=TRUE), 2),
            "p-value:", round(income_test$p.value, 3)))

# COVID-19 incidence
covid_control <- study_sample %>% filter(treatment_group == "Control") %>% pull(county_covid_per_100k)
covid_treatment <- study_sample %>% filter(treatment_group == "Symbolic Incentives") %>% pull(county_covid_per_100k)
covid_test <- t.test(covid_control, covid_treatment)
print(paste("COVID-19 Incidence - Control mean:", round(mean(covid_control, na.rm=TRUE), 2), 
            "Treatment mean:", round(mean(covid_treatment, na.rm=TRUE), 2),
            "Difference:", round(mean(covid_treatment, na.rm=TRUE) - mean(covid_control, na.rm=TRUE), 2),
            "p-value:", round(covid_test$p.value, 3)))

# For binary variables
print("\nPanel A - Binary Variables Balance:")

# Female
female_table <- table(study_sample$is_female, study_sample$treatment_group)
female_test <- chisq.test(female_table)
female_props <- prop.table(female_table, 2)
print(paste("Female - Control prop:", round(female_props[2,1], 3), 
            "Treatment prop:", round(female_props[2,2], 3),
            "Difference:", round(female_props[2,2] - female_props[2,1], 3),
            "p-value:", round(female_test$p.value, 3)))

# Prior plasma donation
prior_table <- table(study_sample$prior_plasma_donation, study_sample$treatment_group)
prior_test <- chisq.test(prior_table)
prior_props <- prop.table(prior_table, 2)
print(paste("Prior Plasma - Control prop:", round(prior_props[2,1], 3), 
            "Treatment prop:", round(prior_props[2,2], 3),
            "Difference:", round(prior_props[2,2] - prior_props[2,1], 3),
            "p-value:", round(prior_test$p.value, 3)))

# Urban region
urban_table <- table(study_sample$is_urban, study_sample$treatment_group)
urban_test <- chisq.test(urban_table)
urban_props <- prop.table(urban_table, 2)
print(paste("Urban Region - Control prop:", round(urban_props[2,1], 3), 
            "Treatment prop:", round(urban_props[2,2], 3),
            "Difference:", round(urban_props[2,2] - urban_props[2,1], 3),
            "p-value:", round(urban_test$p.value, 3)))

# For categorical variables
print("\nPanel A - Categorical Variables Balance:")

# Race
race_table <- table(study_sample$race, study_sample$treatment_group)
race_test <- chisq.test(race_table)
print("Race proportions by treatment:")
print(prop.table(race_table, 2))
print(paste("Race chi-squared p-value:", round(race_test$p.value, 3)))

# Blood type
bloodtype_table <- table(study_sample$bloodtype_group, study_sample$treatment_group)
bloodtype_test <- chisq.test(bloodtype_table)
print("\nBlood type proportions by treatment:")
print(prop.table(bloodtype_table, 2))
print(paste("Blood type chi-squared p-value:", round(bloodtype_test$p.value, 3)))

# US Region
region_table <- table(study_sample$us_region, study_sample$treatment_group)
region_test <- chisq.test(region_table)
print("\nUS Region proportions by treatment:")
print(prop.table(region_table, 2))
print(paste("US Region chi-squared p-value:", round(region_test$p.value, 3)))

# Wave
wave_table <- table(study_sample$wave, study_sample$treatment_group)
wave_test <- chisq.test(wave_table)
print("\nWave proportions by treatment:")
print(prop.table(wave_table, 2))
print(paste("Wave chi-squared p-value:", round(wave_test$p.value, 3)))

# Sample sizes
print("\nPanel A - Sample Sizes:")
print(table(study_sample$treatment_group))

# Panel B: Baseline Sample Balance
print("\n\nPanel B - Baseline Sample Selection Criteria:")

# Email opened
opened_table <- table(baseline_sample$email_opened, baseline_sample$treatment_group)
opened_test <- chisq.test(opened_table)
opened_props <- prop.table(opened_table, 2)
print(paste("Email Opened - Control prop:", round(opened_props[2,1], 3), 
            "Treatment prop:", round(opened_props[2,2], 3),
            "Difference:", round(opened_props[2,2] - opened_props[2,1], 3),
            "p-value:", round(opened_test$p.value, 3)))

# No phone contact
phone_table <- table(baseline_sample$no_phone_contact, baseline_sample$treatment_group)
phone_test <- chisq.test(phone_table)
phone_props <- prop.table(phone_table, 2)
print(paste("No Phone Contact - Control prop:", round(phone_props[2,1], 3), 
            "Treatment prop:", round(phone_props[2,2], 3),
            "Difference:", round(phone_props[2,2] - phone_props[2,1], 3),
            "p-value:", round(phone_test$p.value, 3)))

print("\nPanel B - Sample Sizes:")
print(table(baseline_sample$treatment_group))
```

# Table S3: Attrition Information

```{r table-s3}
# Calculate attrition by treatment group
attrition_summary <- baseline_sample %>%
  group_by(treatment_group) %>%
  summarise(
    enrolled = n(),
    analyzed = sum(is_study_sample, na.rm = TRUE),
    excluded_total = enrolled - analyzed,
    # Criterion 1 only: did not open email, but no phone contact
    excluded_crit1_only = sum(email_opened == 0 & no_phone_contact == 1, na.rm = TRUE),
    # Criterion 2 only: had phone contact, but did open email
    excluded_crit2_only = sum(email_opened == 1 & no_phone_contact == 0, na.rm = TRUE),
    # Both criteria: neither opened email nor phone contact
    excluded_both = sum(email_opened == 0 & no_phone_contact == 0, na.rm = TRUE),
    # Calculate proportions
    prop_crit1 = excluded_crit1_only / excluded_total,
    prop_crit2 = excluded_crit2_only / excluded_total,
    prop_both = excluded_both / excluded_total
  )

print("Table S3 - Attrition Information:")
print(attrition_summary)
```

# Table S4: Main Analysis (Average Marginal Effects)

```{r table-s4}
# Model 1: Appointment creation without controls
model1 <- glm(appointment_within_48h ~ treatment_group + factor(wave), 
              data = study_sample, family = "binomial")
print("Model 1 - Appointment Creation (No Controls):")
summary(model1)

# Calculate AME for Model 1
margins1 <- margins(model1)
print("\nAME for Model 1:")
summary(margins1)

# Model 2: Appointment creation with controls
model2 <- glm(appointment_within_48h ~ treatment_group + factor(wave) + 
              is_female + age + race + prior_plasma_donation + bloodtype_group + 
              avg_annual_donations + zip_median_income + us_region + is_urban + 
              county_covid_per_100k, 
              data = study_sample, family = "binomial")
print("\n\nModel 2 - Appointment Creation (With Controls):")
summary(model2)

# Calculate AME for Model 2
margins2 <- margins(model2)
print("\nAME for Model 2:")
summary(margins2)

# Model 3: Donation without controls
model3 <- glm(donated_within_13d ~ treatment_group + factor(wave), 
              data = study_sample, family = "binomial")
print("\n\nModel 3 - Donation (No Controls):")
summary(model3)

# Calculate AME for Model 3
margins3 <- margins(model3)
print("\nAME for Model 3:")
summary(margins3)

# Model 4: Donation with controls
model4 <- glm(donated_within_13d ~ treatment_group + factor(wave) + 
              is_female + age + race + prior_plasma_donation + bloodtype_group + 
              avg_annual_donations + zip_median_income + us_region + is_urban + 
              county_covid_per_100k, 
              data = study_sample, family = "binomial")
print("\n\nModel 4 - Donation (With Controls):")
summary(model4)

# Calculate AME for Model 4
margins4 <- margins(model4)
print("\nAME for Model 4:")
summary(margins4)
```

# Table S5: Intent-to-Treat (ITT) Analysis

```{r table-s5}
# Repeat main analysis on baseline sample
print("Table S5 - ITT Analysis on Full Baseline Sample")

# Model 1: Appointment creation without controls (ITT)
model1_itt <- glm(appointment_within_48h ~ treatment_group + factor(wave), 
                  data = baseline_sample, family = "binomial")
margins1_itt <- margins(model1_itt)
print("Model 1 ITT - Appointment Creation (No Controls):")
summary(margins1_itt)

# Model 2: Appointment creation with controls (ITT)
model2_itt <- glm(appointment_within_48h ~ treatment_group + factor(wave) + 
                  is_female + age + race + prior_plasma_donation + bloodtype_group + 
                  avg_annual_donations + zip_median_income + us_region + is_urban + 
                  county_covid_per_100k, 
                  data = baseline_sample, family = "binomial")
margins2_itt <- margins(model2_itt)
print("\nModel 2 ITT - Appointment Creation (With Controls):")
summary(margins2_itt)

# Model 3: Donation without controls (ITT)
model3_itt <- glm(donated_within_13d ~ treatment_group + factor(wave), 
                  data = baseline_sample, family = "binomial")
margins3_itt <- margins(model3_itt)
print("\nModel 3 ITT - Donation (No Controls):")
summary(margins3_itt)

# Model 4: Donation with controls (ITT)
model4_itt <- glm(donated_within_13d ~ treatment_group + factor(wave) + 
                  is_female + age + race + prior_plasma_donation + bloodtype_group + 
                  avg_annual_donations + zip_median_income + us_region + is_urban + 
                  county_covid_per_100k, 
                  data = baseline_sample, family = "binomial")
margins4_itt <- margins(model4_itt)
print("\nModel 4 ITT - Donation (With Controls):")
summary(margins4_itt)

print(paste("\nSample size for ITT analysis:", nrow(baseline_sample)))
```

# Table S6: OLS Regressions

```{r table-s6}
# OLS models with robust standard errors
print("Table S6 - OLS Regressions with Robust Standard Errors")

# Model 1: Appointment creation without controls (OLS)
ols1 <- lm(appointment_within_48h ~ treatment_group + factor(wave), 
           data = study_sample)
print("Model 1 OLS - Appointment Creation (No Controls):")
coeftest(ols1, vcov = vcovHC(ols1, type = "HC1"))

# Model 2: Appointment creation with controls (OLS)
ols2 <- lm(appointment_within_48h ~ treatment_group + factor(wave) + 
           is_female + age + race + prior_plasma_donation + bloodtype_group + 
           avg_annual_donations + zip_median_income + us_region + is_urban + 
           county_covid_per_100k, 
           data = study_sample)
print("\nModel 2 OLS - Appointment Creation (With Controls):")
coeftest(ols2, vcov = vcovHC(ols2, type = "HC1"))

# Model 3: Donation without controls (OLS)
ols3 <- lm(donated_within_13d ~ treatment_group + factor(wave), 
           data = study_sample)
print("\nModel 3 OLS - Donation (No Controls):")
coeftest(ols3, vcov = vcovHC(ols3, type = "HC1"))

# Model 4: Donation with controls (OLS)
ols4 <- lm(donated_within_13d ~ treatment_group + factor(wave) + 
           is_female + age + race + prior_plasma_donation + bloodtype_group + 
           avg_annual_donations + zip_median_income + us_region + is_urban + 
           county_covid_per_100k, 
           data = study_sample)
print("\nModel 4 OLS - Donation (With Controls):")
coeftest(ols4, vcov = vcovHC(ols4, type = "HC1"))
```

# Table S7: Different Time Windows

```{r table-s7}
print("Table S7 - Different Time Windows (Logistic Regression)")

# 24-hour window
model_24h <- glm(appointment_within_24h ~ treatment_group + factor(wave) + 
                 is_female + age + race + prior_plasma_donation + bloodtype_group + 
                 avg_annual_donations + zip_median_income + us_region + is_urban + 
                 county_covid_per_100k, 
                 data = study_sample, family = "binomial")
print("Appointment within 24 hours:")
summary(model_24h)$coefficients["treatment_groupSymbolic Incentives",]

# 7-day window
model_7d <- glm(appointment_within_7d ~ treatment_group + factor(wave) + 
                is_female + age + race + prior_plasma_donation + bloodtype_group + 
                avg_annual_donations + zip_median_income + us_region + is_urban + 
                county_covid_per_100k, 
                data = study_sample, family = "binomial")
print("\nAppointment within 7 days:")
summary(model_7d)$coefficients["treatment_groupSymbolic Incentives",]

# Anytime appointment
model_anytime <- glm(appointment_anytime ~ treatment_group + factor(wave) + 
                     is_female + age + race + prior_plasma_donation + bloodtype_group + 
                     avg_annual_donations + zip_median_income + us_region + is_urban + 
                     county_covid_per_100k, 
                     data = study_sample, family = "binomial")
print("\nAppointment anytime:")
summary(model_anytime)$coefficients["treatment_groupSymbolic Incentives",]

# Anytime donation
model_donate_anytime <- glm(donated_anytime ~ treatment_group + factor(wave) + 
                           is_female + age + race + prior_plasma_donation + bloodtype_group + 
                           avg_annual_donations + zip_median_income + us_region + is_urban + 
                           county_covid_per_100k, 
                           data = study_sample, family = "binomial")
print("\nDonation anytime:")
summary(model_donate_anytime)$coefficients["treatment_groupSymbolic Incentives",]
```

# Table S8: Unsubscription and Total Donations

```{r table-s8}
print("Table S8 - Secondary Outcomes (OLS with Robust SEs)")

# Unsubscription without controls
unsub1 <- lm(unsubscribe ~ treatment_group + factor(wave), data = study_sample)
print("Unsubscription (No Controls):")
coeftest(unsub1, vcov = vcovHC(unsub1, type = "HC1"))["treatment_groupSymbolic Incentives",]

# Unsubscription with controls
unsub2 <- lm(unsubscribe ~ treatment_group + factor(wave) + 
             is_female + age + race + prior_plasma_donation + bloodtype_group + 
             avg_annual_donations + zip_median_income + us_region + is_urban + 
             county_covid_per_100k, 
             data = study_sample)
print("\nUnsubscription (With Controls):")
coeftest(unsub2, vcov = vcovHC(unsub2, type = "HC1"))["treatment_groupSymbolic Incentives",]

# Total donations without controls
total1 <- lm(total_donations_post_treatment ~ treatment_group + factor(wave), 
             data = study_sample)
print("\nTotal Donations (No Controls):")
coeftest(total1, vcov = vcovHC(total1, type = "HC1"))["treatment_groupSymbolic Incentives",]

# Total donations with controls
total2 <- lm(total_donations_post_treatment ~ treatment_group + factor(wave) + 
             is_female + age + race + prior_plasma_donation + bloodtype_group + 
             avg_annual_donations + zip_median_income + us_region + is_urban + 
             county_covid_per_100k, 
             data = study_sample)
print("\nTotal Donations (With Controls):")
coeftest(total2, vcov = vcovHC(total2, type = "HC1"))["treatment_groupSymbolic Incentives",]
```

# Table S9: Heterogeneous Treatment Effects

```{r table-s9}
print("Table S9 - Heterogeneous Treatment Effects")

# Female interaction
print("\n1. FEMALE INTERACTION:")

# Appointment outcome
hte_female_appt <- lm(appointment_within_48h ~ treatment_group * is_female + factor(wave) + 
                      age + race + prior_plasma_donation + bloodtype_group + 
                      avg_annual_donations + zip_median_income + us_region + is_urban + 
                      county_covid_per_100k, 
                      data = study_sample)
print("Appointment Creation:")
coeftest(hte_female_appt, vcov = vcovHC(hte_female_appt, type = "HC1"))[c("is_female", "treatment_groupSymbolic Incentives:is_female"),]

# Donation outcome
hte_female_donate <- lm(donated_within_13d ~ treatment_group * is_female + factor(wave) + 
                        age + race + prior_plasma_donation + bloodtype_group + 
                        avg_annual_donations + zip_median_income + us_region + is_urban + 
                        county_covid_per_100k, 
                        data = study_sample)
print("\nDonation:")
coeftest(hte_female_donate, vcov = vcovHC(hte_female_donate, type = "HC1"))[c("is_female", "treatment_groupSymbolic Incentives:is_female"),]

# Annual donations interaction
print("\n\n2. ANNUAL DONATIONS INTERACTION:")

# Appointment outcome
hte_donations_appt <- lm(appointment_within_48h ~ treatment_group * avg_annual_donations + factor(wave) + 
                     is_female + age + race + prior_plasma_donation + bloodtype_group + 
                     zip_median_income + us_region + is_urban + county_covid_per_100k, 
                     data = study_sample)
print("Appointment Creation:")
coeftest(hte_donations_appt, vcov = vcovHC(hte_donations_appt, type = "HC1"))[c("avg_annual_donations", "treatment_groupSymbolic Incentives:avg_annual_donations"),]

# Donation outcome
hte_donations_donate <- lm(donated_within_13d ~ treatment_group * avg_annual_donations + factor(wave) + 
                       is_female + age + race + prior_plasma_donation + bloodtype_group + 
                       zip_median_income + us_region + is_urban + county_covid_per_100k, 
                       data = study_sample)
print("\nDonation:")
coeftest(hte_donations_donate, vcov = vcovHC(hte_donations_donate, type = "HC1"))[c("avg_annual_donations", "treatment_groupSymbolic Incentives:avg_annual_donations"),]

# Urban interaction
print("\n\n3. URBAN INTERACTION:")

# Appointment outcome
hte_urban_appt <- lm(appointment_within_48h ~ treatment_group * is_urban + factor(wave) + 
                     is_female + age + race + prior_plasma_donation + bloodtype_group + 
                     avg_annual_donations + zip_median_income + us_region + county_covid_per_100k, 
                     data = study_sample)
print("Appointment Creation:")
coeftest(hte_urban_appt, vcov = vcovHC(hte_urban_appt, type = "HC1"))[c("is_urban", "treatment_groupSymbolic Incentives:is_urban"),]

# Donation outcome
hte_urban_donate <- lm(donated_within_13d ~ treatment_group * is_urban + factor(wave) + 
                       is_female + age + race + prior_plasma_donation + bloodtype_group + 
                       avg_annual_donations + zip_median_income + us_region + county_covid_per_100k, 
                       data = study_sample)
print("\nDonation:")
coeftest(hte_urban_donate, vcov = vcovHC(hte_urban_donate, type = "HC1"))[c("is_urban", "treatment_groupSymbolic Incentives:is_urban"),]

# Democratic county interaction
print("\n\n4. DEMOCRATIC COUNTY INTERACTION:")

# Appointment outcome
hte_dem_appt <- lm(appointment_within_48h ~ treatment_group * is_majority_dem_county + factor(wave) + 
                   is_female + age + race + prior_plasma_donation + bloodtype_group + 
                   avg_annual_donations + zip_median_income + us_region + is_urban + county_covid_per_100k, 
                   data = study_sample)
print("Appointment Creation:")
coeftest(hte_dem_appt, vcov = vcovHC(hte_dem_appt, type = "HC1"))[c("is_majority_dem_county", "treatment_groupSymbolic Incentives:is_majority_dem_county"),]

# Donation outcome
hte_dem_donate <- lm(donated_within_13d ~ treatment_group * is_majority_dem_county + factor(wave) + 
                     is_female + age + race + prior_plasma_donation + bloodtype_group + 
                     avg_annual_donations + zip_median_income + us_region + is_urban + county_covid_per_100k, 
                     data = study_sample)
print("\nDonation:")
coeftest(hte_dem_donate, vcov = vcovHC(hte_dem_donate, type = "HC1"))[c("is_majority_dem_county", "treatment_groupSymbolic Incentives:is_majority_dem_county"),]
```

# Table S10: Intention-Behavior Gap

```{r table-s10}
print("Table S10 - Intention-Behavior Gap Analysis")

# Filter to those who made appointments
gap_sample <- study_sample %>% filter(!is.na(intention_behavior_gap))
print(paste("Sample size for gap analysis:", nrow(gap_sample)))
print(paste("Control group size:", sum(gap_sample$treatment_group == "Control")))
print(paste("Treatment group size:", sum(gap_sample$treatment_group == "Symbolic Incentives")))

# Model without controls
gap_model1 <- glm(intention_behavior_gap ~ treatment_group + factor(wave), 
                  data = gap_sample, family = "binomial")
print("\nModel 1 - No Controls:")
summary(gap_model1)$coefficients["treatment_groupSymbolic Incentives",]

# Model with controls
gap_model2 <- glm(intention_behavior_gap ~ treatment_group + factor(wave) + 
                  is_female + age + race, 
                  data = gap_sample, family = "binomial")
print("\nModel 2 - With Controls:")
summary(gap_model2)$coefficients["treatment_groupSymbolic Incentives",]

# Show the actual gap rates by treatment
gap_rates <- gap_sample %>%
  group_by(treatment_group) %>%
  summarise(
    n = n(),
    gap_rate = mean(intention_behavior_gap, na.rm = TRUE),
    donated_rate = 1 - gap_rate
  )
print("\nGap rates by treatment group:")
print(gap_rates)
```